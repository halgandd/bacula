# 
# This file is used as the template to create the
# Makefile for the RedHat specific installation.
#
#  15 November 2001 -- Kern Sibbald
#
#  for Bacula release @VERSION@ (@DATE@) -- @DISTNAME@
#

INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@

nothing:

install: install-autostart

install-autostart: install-autostart-fd install-autostart-sd install-autostart-dir

	
install-autostart-fd:
	@if test -f /etc/rc.d/init.d/bacula-fd; then \
	    /sbin/chkconfig --del bacula-fd; \
	fi
	@$(INSTALL_PROGRAM) -m 744 bacula-fd /etc/rc.d/init.d/bacula-fd
	# set symlinks for script at startup and shutdown
	@/sbin/chkconfig --add bacula-fd


install-autostart-sd:
	@if test -f /etc/rc.d/init.d/bacula-sd; then \
	    /sbin/chkconfig --del bacula-sd; \
	fi
	@$(INSTALL_PROGRAM) -m 744 bacula-sd /etc/rc.d/init.d/bacula-sd
	# set symlinks for script at startup and shutdown
	@/sbin/chkconfig --add bacula-sd


install-autostart-dir:
	@if test -f /etc/rc.d/init.d/bacula-dir; then \
	    /sbin/chkconfig --del bacula-dir; \
	fi
	@$(INSTALL_PROGRAM) -m 744 bacula-dir /etc/rc.d/init.d/bacula-dir
	# set symlinks for script at startup and shutdown
	@/sbin/chkconfig --add bacula-dir


uninstall: uninstall-autostart

uninstall-autostart: uninstall-autostart-fd uninstall-autostart-sd uninstall-autostart-dir

uninstall-autostart-fd:
	@if test -f /etc/rc.d/init.d/bacula-fd; then \
	    /sbin/chkconfig --del bacula-fd; \
	fi
	@rm -f /etc/rc.d/init.d/bacula-fd


uninstall-autostart-sd:
	@if test -f /etc/rc.d/init.d/bacula-sd; then \
	    /sbin/chkconfig --del bacula-sd; \
	fi
	@rm -f /etc/rc.d/init.d/bacula-sd

uninstall-autostart-dir:
	@if test -f /etc/rc.d/init.d/bacula-dir; then \
	    /sbin/chkconfig --del bacula-dir; \
	fi
	@rm -f /etc/rc.d/init.d/bacula-dir

clean:

distclean: clean
	@rm -f Makefile bacula-*.spec
	@rm -f bacula-sd bacula-fd bacula-dir
	@rm -rf CVS
