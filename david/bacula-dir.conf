######################################## MYSELF ###########################################
Director {                           
  Name = DIRECTOR1
  DIRport = 9101                
  QueryFile = "/home/halgandd/bacula/bin/query.sql"
  WorkingDirectory = "/home/halgandd/bacula/bin/working"
  PidDirectory = "/home/halgandd/bacula/bin/working"
  Maximum Concurrent Jobs = 1     
  Password = "passdir1"     
  Messages = Daemon
}

######################################## JOBS ###########################################
JobDefs {
  Name = "jobs_FD1"
  Type = Backup
  Level = Incremental
  Client = FD1
  FileSet = "Full_1"
  Schedule = "Minutes"
  Storage = STORAGE1
  Messages = Standard
  Pool = Default
  Priority = 10
}
Job {
  Name = "sauvegarde_FD1"
  JobDefs = "jobs_FD1"
  Write Bootstrap = "/home/halgandd/bacula/bin/working/FD1.bsr"
}

Job {
  Name = "restauration_FD1"
  Type = Restore
  Client= FD1             
  FileSet="Full_1"                  
  Storage = STORAGE1                    
  Pool = Default
  Messages = Standard
}

JobDefs {
  Name = "jobs_FD2"
  Type = Backup
  Level = Incremental
  Client = FD2
  FileSet = "Full_2"
  Storage = STORAGE1
  Messages = Standard
  Pool = Default
}

Job {
  Name = "sauvegarde_FD2"
  JobDefs = "jobs_FD2"
  Write Bootstrap = "/home/halgandd/bacula/bin/working/FD2.bsr"
}

Job {
  Name = "restauration_FD2"
  Type = Restore
  Client= FD2             
  FileSet="Full_2"                  
  Storage = STORAGE1                 
  Pool = Default
  Messages = Standard
}



######################################## SCHEDULES ###########################################
Schedule {
  Name = "WeeklyCycle"
  Run = Full 1st sun at 23:05
  Run = Differential 2nd-5th sun at 23:05
  Run = Incremental mon-sat at 23:05
}
Schedule {
  Name = "hourlycycle"
  Run = Full hourly 
}
Schedule {
  Name = "TenMinutes"
  Run = Level=Full hourly at 0:05
  Run = Level=Full hourly at 0:10
  Run = Level=Full hourly at 0:15
  Run = Level=Full hourly at 0:20
  Run = Level=Full hourly at 0:25
  Run = Level=Full hourly at 0:30
  Run = Level=Full hourly at 0:35
  Run = Level=Full hourly at 0:40
  Run = Level=Full hourly at 0:45
  Run = Level=Full hourly at 0:50
  Run = Level=Full hourly at 0:55
  Run = Level=Full hourly at 0:00
}
Schedule {
  Name = "FiveMinutes"
  Run = Level=Full hourly at 0:05
  Run = Level=Full hourly at 0:10
  Run = Level=Full hourly at 0:15
  Run = Level=Full hourly at 0:20
  Run = Level=Full hourly at 0:25
  Run = Level=Full hourly at 0:30
  Run = Level=Full hourly at 0:35
  Run = Level=Full hourly at 0:40
  Run = Level=Full hourly at 0:45
  Run = Level=Full hourly at 0:50
  Run = Level=Full hourly at 0:55
  Run = Level=Full hourly at 0:00
}
Schedule {
  Name = "Minutes"
  Run = Level=Full hourly at 0:00
  Run = Level=Full hourly at 0:01
  Run = Level=Full hourly at 0:02
  Run = Level=Full hourly at 0:03
  Run = Level=Full hourly at 0:04
  Run = Level=Full hourly at 0:05
  Run = Level=Full hourly at 0:06
  Run = Level=Full hourly at 0:07
  Run = Level=Full hourly at 0:08
  Run = Level=Full hourly at 0:09
  Run = Level=Full hourly at 0:10
  Run = Level=Full hourly at 0:11
  Run = Level=Full hourly at 0:12
  Run = Level=Full hourly at 0:13
  Run = Level=Full hourly at 0:14
  Run = Level=Full hourly at 0:15
  Run = Level=Full hourly at 0:16
  Run = Level=Full hourly at 0:17
  Run = Level=Full hourly at 0:18
  Run = Level=Full hourly at 0:19
  Run = Level=Full hourly at 0:20
  Run = Level=Full hourly at 0:21
  Run = Level=Full hourly at 0:22
  Run = Level=Full hourly at 0:23
  Run = Level=Full hourly at 0:24
  Run = Level=Full hourly at 0:25
  Run = Level=Full hourly at 0:26
  Run = Level=Full hourly at 0:27
  Run = Level=Full hourly at 0:28
  Run = Level=Full hourly at 0:29
  Run = Level=Full hourly at 0:30
  Run = Level=Full hourly at 0:31
  Run = Level=Full hourly at 0:32
  Run = Level=Full hourly at 0:33
  Run = Level=Full hourly at 0:34
  Run = Level=Full hourly at 0:35
  Run = Level=Full hourly at 0:36
  Run = Level=Full hourly at 0:37
  Run = Level=Full hourly at 0:38
  Run = Level=Full hourly at 0:39
  Run = Level=Full hourly at 0:40
  Run = Level=Full hourly at 0:41
  Run = Level=Full hourly at 0:42
  Run = Level=Full hourly at 0:43
  Run = Level=Full hourly at 0:44
  Run = Level=Full hourly at 0:45
  Run = Level=Full hourly at 0:46
  Run = Level=Full hourly at 0:47
  Run = Level=Full hourly at 0:48
  Run = Level=Full hourly at 0:49
  Run = Level=Full hourly at 0:50
  Run = Level=Full hourly at 0:51
  Run = Level=Full hourly at 0:52
  Run = Level=Full hourly at 0:53
  Run = Level=Full hourly at 0:54
  Run = Level=Full hourly at 0:55
  Run = Level=Full hourly at 0:56
  Run = Level=Full hourly at 0:57
  Run = Level=Full hourly at 0:58
  Run = Level=Full hourly at 0:59
}

################################ FILESETS #########################################
FileSet {
  Name = "Full_1"
  Include {
    Options {
      signature = MD5
    }
    File = /home/halgandd/Bureau/A_SAUVER/FD1
  }
  Exclude {
    File = /proc
    File = /tmp
    File = /.journal
    File = /.fsck
  }
}
FileSet {
  Name = "Full_2"
  Include {
    Options {
      signature = MD5
    }
    File = /home/halgandd/bacula
  }
  Exclude {
    File = /proc
    File = /tmp
    File = /.journal
    File = /.fsck
  }
}
FileSet {
  Name = "Catalog"
  Include {
    Options {
      signature = MD5
    }
    File = /var/bacula/working/bacula.sql
  }
}

FileSet {
  Name = "Full Set"
  Include {
    Options {
      signature = MD5
    }
    File = /home/halgandd/Bureau/Bacula3/bacula-3.0.0
  }
  Exclude {
    File = /proc
    File = /tmp
    File = /.journal
    File = /.fsck
  }
}
######################################## CLIENTS ###########################################
Client {
  Name = FD1
#  Address = powermate-3
  Address = ddd
  FDPort = 9102
  Catalog = MyCatalog   
  Password = "passfd1"          
  File Retention = 30 days            # 30 days
  Job Retention = 6 months            # six months
  AutoPrune = yes     
}
Client {
  Name = FD2
  Address = ddd
  FDPort = 9102
  Catalog = MyCatalog   
  Password = "passfd2"          
  File Retention = 30 days            # 30 days
  Job Retention = 6 months            # six months
  AutoPrune = yes     
}

######################################## STORAGES ###########################################
Storage {
  Name = STORAGE1
  Address = 172.26.44.53                # N.B. Use a fully qualified name here
  SDPort = 9103
  Password = "passsd"
  Device = CASE1
  Media Type = File
}

######################################## CATALOG ###########################################
Catalog {
  Name = MyCatalog
  dbname = "bacula"; dbuser = "bacula"; dbpassword = ""
}

######################################## MESSAGES ###########################################
Messages {
  Name = Standard
  mailcommand = "/home/halgandd/bacula/bin/bsmtp -h localhost -f \"\(Bacula\) \<%r\>\" -s \"Bacula: %t %e of %c %l\" %r"
  operatorcommand = "/home/halgandd/bacula/bin/bsmtp -h localhost -f \"\(Bacula\) \<%r\>\" -s \"Bacula: Intervention needed for %j\" %r"
  mail = halgandd@chantrerie-asperience.fr = all, !skipped            
  operator = halgandd@chantrerie-asperience.fr = mount
  console = all, !skipped, !saved
  append = "/home/halgandd/bacula/bin/working/log" = all, !skipped
}

Messages {
  Name = Daemon
  mailcommand = "/home/halgandd/bacula/bin/bsmtp -h localhost -f \"\(Bacula\) \<%r\>\" -s \"Bacula daemon message\" %r"
  mail = halgandd@chantrerie-asperience.fr = all, !skipped            
  console = all, !skipped, !saved
  append = "/home/halgandd/bacula/bin/working/log" = all, !skipped
}



######################################## POOLS ###########################################
Pool {
  Name = Default
  Pool Type = Backup
  Recycle = yes                       # Bacula can automatically recycle Volumes
  AutoPrune = yes                     # Prune expired volumes
  Volume Retention = 365 days         # one year
}

# Scratch pool definition
Pool {
  Name = Scratch
  Pool Type = Backup
}

######################################## CONSOLE ###########################################
Console {
  Name = DIRECTOR1mon
  Password = "passmon"
  CommandACL = status, .status
}

Console {
  Name = FD1
  Password = "passfd1con"
  CommandACL = setip
  JobACL = *all*
  ClientACL = *all*
  StorageACL = *all*
  ScheduleACL = *all*
  PoolACL = *all*
  FileSetACL = *all*
  CatalogACL = *all*
}

Console {
  Name = FD2
  Password = "passfd2con"
  CommandACL = setip
  JobACL = *all*
  ClientACL = *all*
  StorageACL = *all*
  ScheduleACL = *all*
  PoolACL = *all*
  FileSetACL = *all*
  CatalogACL = *all*
}






